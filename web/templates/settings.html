{{define "generic_content"}}
<h1>Settings</h1>

{{if .flashes}}
{{range .flashes}}
<div class="alert alert-{{if .Category}}{{.Category}}{{else}}info{{end}}" role="alert">
    {{if .Message}}{{.Message}}{{else}}{{.}}{{end}}
</div>
{{end}}
{{end}}

<div class="card mb-20">
    <div class="card-body">
        <h5 class="card-title">Profile</h5>
        <form action="{{urlFor "settings"}}" method="post">
            <input type="hidden" name="action" value="update_name">
            <div class="form-group">
                <label for="name">Display Name</label>
                <input type="text" name="name" id="name" class="form-control" value="{{.user_name}}" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" class="form-control" value="{{.user_email}}" disabled>
                <small class="form-text text-muted">Email cannot be changed</small>
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Change Password</h5>
        <form action="{{urlFor "settings"}}" method="post">
            <input type="hidden" name="action" value="change_password">
            <div class="form-group">
                <label for="current_password">Current Password</label>
                <input type="password" name="current_password" id="current_password" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="new_password">New Password</label>
                <input type="password" name="new_password" id="new_password" class="form-control" minlength="8" required>
                <small class="form-text text-muted">Minimum 8 characters</small>
            </div>
            <div class="form-group">
                <label for="confirm_password">Confirm New Password</label>
                <input type="password" name="confirm_password" id="confirm_password" class="form-control" minlength="8" required>
            </div>
            <button type="submit" class="btn btn-primary">Change Password</button>
        </form>
    </div>
</div>
{{end}}
