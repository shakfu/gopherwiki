{{define "generic_content"}}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/"><i class="fas fa-home"></i></a></li>
        <li class="breadcrumb-item"><a href="/-/issues">Issues</a></li>
        <li class="breadcrumb-item active">#{{.issue.ID}}</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-start mb-3">
    <div>
        <h1 class="mb-1">
            {{if eq .issue.Status "open"}}
            <span class="issue-status-open" title="Open"><i class="fas fa-exclamation-circle"></i></span>
            {{else}}
            <span class="issue-status-closed" title="Closed"><i class="fas fa-check-circle"></i></span>
            {{end}}
            {{.issue.Title}}
        </h1>
        <p class="text-muted">
            <span class="badge {{if eq .issue.Status "open"}}badge-success{{else}}badge-secondary{{end}}">{{.issue.Status}}</span>
            #{{.issue.ID}} opened {{formatDatetime .issue.CreatedAt.Time "relative"}}
            {{if .issue.CreatedByName.Valid}}by {{.issue.CreatedByName.String}}{{end}}
        </p>
    </div>
    <div>
        {{if .canEdit}}
        <a href="/-/issues/{{.issue.ID}}/edit" class="btn btn-sm btn-outline-primary">Edit</a>
        {{if eq .issue.Status "open"}}
        <form action="/-/issues/{{.issue.ID}}/close" method="post" class="d-inline">
            <button type="submit" class="btn btn-sm btn-outline-secondary">Close Issue</button>
        </form>
        {{else}}
        <form action="/-/issues/{{.issue.ID}}/reopen" method="post" class="d-inline">
            <button type="submit" class="btn btn-sm btn-outline-success">Reopen Issue</button>
        </form>
        {{end}}
        {{end}}
        {{if .canDelete}}
        <form action="/-/issues/{{.issue.ID}}/delete" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this issue?');">
            <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
        </form>
        {{end}}
    </div>
</div>

{{if or .issue.Category.Valid .tags}}
<div class="mb-3">
    {{if .issue.Category.Valid}}
    <span class="badge badge-info mr-2">{{.issue.Category.String}}</span>
    {{end}}
    {{range .tags}}
    <span class="badge issue-tag issue-tag-{{.}}">{{.}}</span>
    {{end}}
</div>
{{end}}

<div class="issue-description card">
    <div class="card-body">
        {{if .htmlcontent}}
        <div class="wiki-content">
            {{.htmlcontent}}
        </div>
        {{else}}
        <p class="text-muted">No description provided.</p>
        {{end}}
    </div>
</div>

<div class="mt-3">
    <a href="/-/issues" class="btn btn-outline-secondary">Back to Issues</a>
</div>
{{end}}
